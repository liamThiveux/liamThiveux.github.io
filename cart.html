<!DOCTYPE html>
<html xml:lang="en" xmlns="http://www.w3.org/1999/xhtml" class="flexNav-no-touch" lang="en">
<head>
	<meta content="text/html; charset=UTF-8" http-equiv="content-type">
	<meta content="text/javascript" http-equiv="content-script-type">
	<meta content="0" http-equiv="expires">
	<meta content="no-cache" http-equiv="pragma">
	<meta content="no-cache, must-revalidate" http-equiv="cache-control">
	<meta content="initial-scale=1.0, user-scalable=1" name="viewport">
	<title>Checkout Page</title>
	</head>
<style type="text/css">
img {
   position: absolute;
   left: 50%;
   width: 750px;
   margin-left: -375px;
   z-index: -1;/* Half the width */
}
		
table
{
    border-collapse: collapse;
}
	
td, th /* Mettre une bordure sur les td ET les th */
{
    border: 1px solid black;
}
	</style>
	<body style="background-image:url(bg.png); z-index: -1;">

		<script>
	var url = new URL(window.location.href);
	var c = url.searchParams.get("numcard");
	console.log(c);
	</script>
	
<div class="commande" style="background-color:white;">
<table id="recap">
   <tr>
       <th>Produit</th>
       <th>Description</th>
       <th>Prix</th>
	   <th> </th>
   </tr>

   <tr>
       <td></td>
       <td>Article 1</td>
       <td>12.00</td>
	   <td><button id="del1" onclick="deleteArticle(1);"> del </button></td>
   </tr>
   <tr>
       <td></td>
       <td>Article 2</td>
       <td>10.00</td>
	   <td> <button id="del2" onclick="deleteArticle(2);"> del </button> </td>
   </tr>
</table>
	<div class="article" id="article">
		<p> Article 1 </p> <p id="article1"> 12.00</p> <button id="del1" onclick="delete(1);"> del </button>
		<p> Article 2 </p> <p id="article2"> 10.00</p> <button id="del2" onclick="delete(2);"> del </button>
	</div>
	
	<div class="total" id="total">
		<p id="totalLabel"> Total : </p>
		<p id="totalAmount"> </p>
	</div>
</div>
<p class="img">
	<p style="position: absolute; left: 400px; top: 410px"> Install and try: </p>
	<a href="recommendedapp/index.html">
		<img class="left" src="recommendedapp/bgPaylib.png" alt="" title="" style="width: 50px; height: 30px;position: absolute;
left: 65%;
top: 422px;  z-index: 1;" />
	</a>
</p>
	
	<button id="payer" onclick="payer();"> Payer </button>
	<button id="art3" onclick="addArticle(2,'Article 3', '15.00');"> Article 3 </button>
	<button id="art4" onclick="addArticle(3,'Article 4', '22.00');"> Article 4 </button>

	<script>
	calculTotal();
		
		function deleteArticle(id){
			var table = document.getElementById("recap");
			table.deleteRow(id);
			calculTotal();
		}
		
		function addArticle(id,art,value){
    var elmt = document.getElementById("recap");
    var tr = document.createElement('tr');
    elmt.appendChild(tr);
     
    var td = document.createElement('td');
    tr.appendChild(td);
    var tdText = document.createTextNode("");
    td.appendChild(tdText);

    var tdDesc = document.createElement('td');
    tr.appendChild(tdDesc);
    var tdTextDesc = document.createTextNode(art);
    tdDesc.appendChild(tdTextDesc);
			
    var tdPrix = document.createElement('td');
    tr.appendChild(tdPrix);
    var tdTextPrix = document.createTextNode(value);
    tdPrix.appendChild(tdTextPrix);
			
    var tdDel = document.createElement('td');
    tr.appendChild(tdDel);
    var del = document.createElement('BUTTON');
    del.onclick="deleteArticle("+id+");";
    tdDel.appendChild(del);
    var t = document.createTextNode("del");
    del.appendChild(t);
    
    calculTotal();
		}
	
		function calculTotal(){
			var rowCount = document.getElementById('recap').rows.length;
			console.log(rowCount);
			var total = document.getElementById("totalAmount");
			var amount = 0;
			for (i=1;i<rowCount;i++){
				amount= amount + parseFloat(document.getElementById("article"+i).innerHTML);
			}
			total.innerHTML = amount + " â‚¬";
		}
		

	</script>	
</body>
</html>
