<!DOCTYPE html>
<html xml:lang="en" xmlns="http://www.w3.org/1999/xhtml" class="flexNav-no-touch" lang="en">
<head>
	<meta content="text/html; charset=UTF-8" http-equiv="content-type">
	<meta content="text/javascript" http-equiv="content-script-type">
	<meta content="0" http-equiv="expires">
	<meta content="no-cache" http-equiv="pragma">
	<meta content="no-cache, must-revalidate" http-equiv="cache-control">
	<meta content="initial-scale=1.0, user-scalable=1" name="viewport">
	<script src="sips/w3CPayment.js" type="text/javascript"></script>

	<title>Checkout Page</title>
	</head>
<style type="text/css">
		
<style>
table, td, th {    
    text-align: left;
}

table {
    border-collapse: collapse;
    width: 100%;
}

th, td {
    border: 1px solid black;
    padding: 15px;
}
	
.photo{
    text-align: center;
    background-color: white; 
	}
	
.delete{
    border: none;
        }	
</style>
	<body style="background-image:url(bg.png); z-index: -1;">

		<script>
	var url = new URL(window.location.href);
	var c = url.searchParams.get("numcard");
	console.log(c);
	</script>
	
<div class="commande" style="width:75%; position:absolute; top:15%; left:15%;">
<table id="recap">
   <tr>
       <th style="background-color:white; ">Produit</th>
       <th style="background-color:white; ">Description</th>
       <th style="background-color:white; ">Prix</th>
	   <th class="delete"> </th>
   </tr>

   <tr>
       <td class='photo'><img src="basket.jpg" width="50" height="50"></td>
       <td  style="background-color:white; ">Article 1</td>
       <td  style="background-color:white; "id="article1">12.00</td>
	   <td class="delete"><button id="del1" onclick="deleteArticle(this);"><img src="del.png" width="30" height="30"></button></td>
   </tr>
   <tr>
       <td class='photo'><img src="basket.jpg" width="50" height="50"></td>
       <td  style="background-color:white;">Article 2</td>
       <td  style="background-color:white;" id="article2">10.00</td>
	   <td class="delete"> <button id="del2" onclick="deleteArticle(this);"><img src="del.png" width="30" height="30"></button> </td>
   </tr>
</table>
	<div class="total" id="total" style="text-align:right;">
		Total : <p id="totalAmount"> </p>
	</div class="delete">
</div>
<p class="img">
	<p style="position: absolute; left: 400px; top: 410px"> Install and try: </p>
	<a href="recommendedapp/index.html">
		<img class="left" src="recommendedapp/bgPaylib.png" alt="" title="" style="width: 50px; height: 30px;position: absolute;
left: 65%;
top: 422px;  z-index: 1;" />
	</a>
</p>
	
	<button id="payer" onclick="payer();"> Payer </button>
	<button id="click" onclick="addArticle(2,'Article 3', '15.00');"> <img src="basket.jpg" width="50" height="50"> </button>
	<button id="art3" onclick="addArticle(2,'Article 3', '15.00');"> Article 3 </button>
	<button id="art4" onclick="addArticle(3,'Article 4', '22.00');"> Article 4 </button>

	<script>
	calculTotal();
		
	function deleteArticle(id){
		id.parentNode.parentNode.parentNode.removeChild(id.parentNode.parentNode);
		calculTotal();
	}
		
    function addArticle(id,art,value){
    var rowCount = document.getElementById('recap').rows.length;
    var name = rowCount+1;
    var elmt = document.getElementById("recap");
    var tr = document.createElement('tr');
    elmt.appendChild(tr);
     
    var td = document.createElement('td');
    td.style.backgroundColor="white";
    tr.appendChild(td);
    var tdText = document.createTextNode("");
    td.appendChild(tdText);

    var tdDesc = document.createElement('td');
    tdDesc.style.backgroundColor ="white";
    tr.appendChild(tdDesc);
    var tdTextDesc = document.createTextNode(art);
    tdDesc.appendChild(tdTextDesc);
			
    var tdPrix = document.createElement('td');
    tdPrix.id = 'article'+name;
    tdPrix.style.backgroundColor="white";
    tr.appendChild(tdPrix);
    var tdTextPrix = document.createTextNode(value);
    tdPrix.appendChild(tdTextPrix);
			
    var tdDel = document.createElement('td');
    tr.appendChild(tdDel);
    var del = document.createElement('BUTTON');
    del.onclick= function () {
	deleteArticle(this);
};
    tdDel.appendChild(del);
    var img = new Image(30,30); // width, height values are optional params 
    img.src = 'del.png';
    del.appendChild(img);
    
    calculTotal();
		}
	
		function calculTotal(){
			var table = document.getElementById('recap');
			var rowCount = document.getElementById('recap').rows.length;
			console.log(rowCount);
			var total = document.getElementById("totalAmount");
			var amount = 0;
			for (i=1;i<rowCount;i++){
				amount= amount + parseFloat(table.rows[i].cells[2].innerHTML);
			}
			total.innerHTML = amount + " â‚¬";
		}
		
//var mList = document.getElementById("methodList");
		
function payer(){
if (window.PaymentRequest) {
	var url = new URL(window.location.href);
	//mList.style.display="none";
		launchPayment(['amex', 'visa', 'mastercard']);
	}
}
		
	</script>	
</body>
</html>
