<form id="form">
<table>
  <tr><th>Cardholder Name:</th><td><input name="cardholderName"></td></tr>
  <tr><th>Card Number:</th><td><input name="cardNumber"></td></tr>
  <tr><th>Expiration Month:</th><td><input name="expiryMonth"></td></tr>
  <tr><th>Expiration Year:</th><td><input name="expiryYear"></td></tr>
  <tr><th>Security Code:</th><td><input name="cardSecurityCode"></td></tr>
  <tr><th></th><td><input type="submit" value="Pay"></td></tr>
</table>
</form>

<script>
window.addEventListener("message", function(e) {
  var form = document.getElementById("form");
  /* Note: message sent from payment app is available in e.data */
  form.onsubmit = function() {
    /* See https://w3c.github.io/payment-handler/#paymenthandlerresponse-dictionary */
    var cardholder = document.getElementsByName("cardHolderName").value;    
    console.log(cardholder);
    var cardnumber = document.getElementsByName("cardNumber").value;
    var cardnumber = document.getElementsByName("cardNumber").value;
    var expiration = document.getElementsByName("expiryMonth").value + "/" + document.getElementsByName("expiryYear").value;
    var crypto = document.getElementsByName("cardSecurityCode").value;
    var paymentAppResponse = {
      methodName: "https://liamThiveux.github.io",
       details: {
      cardHolderName:   cardholder,
      cardNumber:       cardnumber,
      expiration: expiration,
      cardSecurityCode: crypto
     }
    };

    e.source.postMessage(paymentAppResponse);
    window.close();
  }
});
</script>
