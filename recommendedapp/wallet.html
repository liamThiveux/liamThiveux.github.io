<script>
navigator.serviceWorker.addEventListener('message', function (e) {
    console.log('got message:', e.data);
  var form = document.getElementById("loginForm");
  /* Note: message sent from payment app is available in e.data */
  form.onsubmit = function() {
	 console.log("on submit function");
   
	  var paymentAppResponse = {          
	  methodName: 'https://liamThiveux.github.io',
          details: {
		  methodName: "Paylib POC",
              compte: "Liam thiveux",
              cardNumber: "4200 1234 4567 7891",
              token: "1234567890",
	        }
	  };
    e.source.postMessage(paymentAppResponse);
    window.close();
}
});	
</script> 

<html lang="en">
 
 <head>
     <meta charset="utf-8">
     <meta name="viewport" content="width=device-width, initial-scale=1">
     <title>Payment Handler for Paylib</title>
     <link rel="icon" href="/favicon.ico">
 </head>
  <style type="text/css">
   body, html {
    height: 100%;
}
   
   .bg { 
    /* The image used */
    background-image: url("ewallet.jpg");
    /* Full height */
    height: 100%; 
    /* Center and scale the image nicely */
    background-position: center;
    background-repeat: no-repeat;
    background-size: cover;
   }
   
   .contents {
   position: absolute;
   left:50%;
   top: 50%;
   transform: translate(-50%, -50%); 
   }
  p {position:relative; width:180px; padding-right:120px; text-align:right;}
  p img {position:absolute; right:0;} 
  </style>
 <body>

  <!--Carte 1 :   <p id=cardnumber> 4970 XXXX XXXX 5321 </p>
 <p> Thiveux Liam </p>
 <img src="visa.jpg" style="width: 60px; height:50px;">-->

<!--<select id="mywallet">
  <option value="4970 XXXX XXXX 5321" selected> Carte 1 :   <p id=cardnumber> 4970 XXXX XXXX 5321 </p>
 <p> Thiveux Liam </p>
 <img src="visa.jpg" style="width: 60px; height:50px;"></option> 
  <option value="4200 XXXX XXXX 1111"> Carte 2 :   <p id=cardnumber> 4200 XXXX XXXX 1111 </p>
 <p> Thiveux Liam </p>
 <img src="visa.jpg" style="width: 60px; height:50px;"></option>
  <option value="4650 XXXX XXXX 3232"> Carte 3 :   <p id=cardnumber> 4650 XXXX XXXX 3232 </p>
 <p> Thiveux Liam </p>
 <img src="visa.jpg" style="width: 60px; height:50px;"></option>
</select>--> 
       <div class="bg">                                               
<div class="contents">
 <br><br><br><br><br>
<input type="radio" name= "choixcarte" value="4970 XXXX XXXX 5321"><font color="white"> Carte 1 : <p id=cardnumber> 4970 XXXX XXXX 5321 <br>
Thiveux Liam
  <img src="visa.jpg" style="width: 110px; height:80px;"> </p> </font> <br>
<input type="radio" name= "choixcarte" value="4200 XXXX XXXX 1111"><font color="white">Carte 2 :   <p id=cardnumber> 4200 XXXX XXXX 1111
 <br> Thiveux Liam 
  <img src="visa.jpg" style="width: 110px; height:80px;"></p> </font> <br>
<input type="radio" name= "choixcarte" value="4650 XXXX XXXX 3232"><font color="white">Carte 3 :   <p id=cardnumber> 4650 XXXX XXXX 3232 
 <br> Thiveux Liam </p>
 <img src="visa.jpg" style="width: 110px; height:80px;"></font></p>
      <button align=center onclick="senddata();" id="subcard"> OK </button>
 </div>
   
  </div>

 <script src="app.js"></script>
 <script>
  
  function senddata() {
      /*var cardnumber = document.getElementById("cardnumber").innerHTML;
      document.getElementById("cardnumber").value = cardnumber;
      console.log(cardnumber); 
      var select = document.getElementById("mywallet");
      var choice = select.selectedIndex;
      var valeur_cherchee = select.options[choice].value;
      console.log(valeur_cherchee);*/
   
      var radio = document.querySelector('input[name="choixcarte"]:checked').value;
      location.href = 'https://liamThiveux.github.io/index.html?numcard='+radio;
  }
  
  </script>
 </body>

 
 </html>
