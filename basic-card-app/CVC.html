<html>
<body>
<p style="text-align:center"> Saisissez le cryptogramme visuel de votre carte 4970 XXXX XXXX XX90 (CVC) </p>
<img src="CVC.png" width="50" height="40"> 
	<input style="text-align:center" pattern=".{3,3}" required type="password" name="cvc" id="cvc" value="">
	<p style=" text-align:center"> <input type="submit" name="payer" id="payer" value="Payer" onclick="payer();"> </p>

<script>
var messageSRC;


navigator.serviceWorker.addEventListener('message', function (e) {
  console.log('got message:', e.data);
	messageSRC = e.source; 
	});
  
  function payer() {
     var cvc = document.getElementById("cvc").value; 
     if (cvc && cvc.lenght==3) {
        		var paymentAppResponse = {          
	  methodName: 'https://liamThiveux.github.io',
          details: {
	      internalContext: "PSP-Atos",
	      amount: "1000000,00",
	      methodName: "Paylib POC",
              compte: "Liam thiveux",
              cardNumber: "4200 1234 4567 7891",
              token: "1234567890",
         }
    };
        messageSRC.postMessage(paymentAppResponse);
        window.close();
      }
else {
	alert("Veuillez saisir un CVC de 3 chiffres"
	      }
  }
</script>
</body>
</html>
