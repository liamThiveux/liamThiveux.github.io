<html>
<body>
	
	<style>
body, html {
    height: 100%;
}
  
  
.bg { 
    /* The image used */
    background-image: url("fond_monEspace.png");
    /* Full height */
    height: 100%; 
    /* Center and scale the image nicely */
    background-position: center;
    background-repeat: no-repeat;
    background-size: cover;
}
</style>
    <script>
        var messageSRC; 
        var cardNumber;
        var expDate;
  navigator.serviceWorker.addEventListener('message', function (e) {
  console.log('got message:', e.data);
	messageSRC = e.source; 
	console.log(messageSRC);
	});
    </script>
	
  <div class="bg" id="bg">
          <input style="position:absolute;left:15%;top:33%;font-size:7;" type="text" id="id" name="id" size="8" value="">
          <input style="position:absolute;left:17%;top:60%;font-size:7;" type="password" id="pwd" name="pwd" size="8" value="">
          <input style="position:absolute;left:17%;top:80%;font-size:8;" type="submit" id="connexion" name="connexion" value="Se connecter" onclick="send();">
  </div>

	<div id="divCVC" style="display:none;">
<p style="text-align:center" id="titre" name="titre"></p>
<img src="CVC.png" width="50" height="40" style="position:absolute;left:20%;"> 
	<p style=" text-align:center"><input style="text-align:center" pattern=".{3,3}" required type="password" name="cvc" id="cvc" value=""> </p>
	<p style=" text-align:center"><input type="submit" name="payer" id="payer" value="Payer" onclick="payer();"> </p>
	</div>
<script>
	
	
        function send() {
		document.getElementById("divCVC").style.display="block";
		document.getElementById("bg").style.display="none";
        }

  
  function payer() {
	console.log(window.opener);
     var cvc = document.getElementById("cvc").value; 
     if (cvc && cvc.length==3) {
        var paymentAppResponse = {          
	  methodName: 'basic-card',
          details: {
	      methodName: "basic-card",
              cardNumber: "5134101234567890",
	      cardSecurityCode: "123",
	      cardHolderName: "Theau Michaela",
	      expiryMonth: "00",
	      expiryYear: "0000"
	  }
    };
        messageSRC.postMessage(paymentAppResponse);
        window.close();
      }
else {
	alert("Veuillez saisir un CVC de 3 chiffres");
	      }
  }
// document.addEventListener("DOMContentLoaded", function(event) {
//	document.getElementById("titre").innerHTML = "Saisissez le cryptogramme visuel de votre carte" + cardNumber;
  //});
</script>
</body>
</html>
